package KFMsg;

enum ClusterProtocol
{
	S2S_CLUSTER_REGISTER_REQ = 10101;			// 注册到服务器集群
	S2S_CLUSTER_UPDATE_REQ = 10102;				// 更新集群连接器连接数量
	S2S_CLUSTER_AUTH_REQ = 10103;				// 集群登录认证
	S2S_CLUSTER_AUTH_ACK = 10104;				// 集群登录认证
	S2S_CLUSTER_TOKEN_REQ = 10105;				// 集群Token
	S2S_CLUSTER_VERIFY_REQ = 10106;				// 验证token请求
	S2S_CLUSTER_VERIFY_ACK = 10107;				// 验证token回馈
	S2S_CLUSTER_CLIENT_LIST_REQ = 10108;		// 客户端列表
	S2S_ADD_OBJECT_TO_PROXY_REQ = 10109;		// 添加对象映射
	S2S_REMOVE_OBJECT_TO_PROXY_REQ = 10110;		// 删除对象映射
	S2S_SEND_TO_CLUSTER_OBJECT_REQ = 10111;		// 发送到集群对象
 }

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// 集群注册
// S2S_CLUSTER_REGISTER_REQ
message S2SClusterRegisterReq
{
	required string type = 1;
	required uint32 id = 2;
	required string name = 3;
	required string ip = 4;
	required uint32 port = 5;
}

// 更新集群连接器连接数量
// S2S_CLUSTER_UPDATE_REQ
message S2SClusterUpdateReq
{
	required uint32 gateid = 1;
	required uint32 count = 2;
}

// 集群登录认证
// S2S_CLUSTER_AUTH_REQ
message S2SClusterAuthReq
{
	required string clustertype = 1;
	required string clusterkey = 2;
}

// 集群登录认证回馈
// S2S_CLUSTER_AUTH_ACK
message S2SClusterAuthAck
{
	required string clustertype = 1;
	required string token = 2;
	required string type = 3;
	required uint32 id = 4;
	required string name = 5;
	required string ip = 6;
	required uint32 port = 7;	
}

// 更新token信息
// S2S_CLUSTER_TOKEN_REQ
message S2SClusterTokenReq
{
	required string token = 1;
	required uint32 gateid = 2;
}

// 验证token
// S2S_CLUSTER_VERIFY_REQ
message S2SClusterVerifyReq
{
	required string clustertype = 1;
	required string token = 2;
	required uint32 serverid = 3;
}

// 认证回馈
// S2S_CLUSTER_VERIFY_ACK
message S2SClusterVerifyAck
{
	required string clustertype = 1;	// 集群类型
	required uint32 serverid = 2;		// =0 认证不成功, 重新连接集群master地址
}

// 客户端列表
// S2S_CLUSTER_CLIENT_LIST_REQ
message S2SClusterClientListReq
{
	repeated uint32 clientid = 1;	// 客户端列表
}

// 注册对象映射
// S2S_ADD_OBJECT_TO_PROXY_REQ
message S2SAddObjectToProxyReq
{
	repeated uint64 objectid = 1;
}

// 删除对象映射
// S2S_REMOVE_OBJECT_TO_PROXY_REQ
message S2SRemoveObjectToProxyReq
{
	repeated uint64 objectid = 2;
}

// 发送消息到对象
// S2S_SEND_TO_CLUSTER_OBJECT_REQ
message S2SSendToClusterObjectReq
{
	required uint64 objectid = 1;
	required uint32 msgid = 2;
	required string msgdata = 3;
}
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////