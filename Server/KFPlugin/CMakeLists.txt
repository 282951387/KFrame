include_directories(
    ${ROOT_DIR}/KFPlugin
    ${ROOT_DIR}/KFLibrary/google/protobuf/src
    ${ROOT_DIR}/KFLibrary/ftp
    ${ROOT_DIR}/KFLibrary/lua/lua53	
    ${ROOT_DIR}/KFLibrary/redis/linux/deps
)

macro(LINK_SDK_MACRO project_name)

if(CMAKE_BUILD_TYPE MATCHES "Debug") 
    target_link_libraries(${project_name} z dl jsoncpp ssl crypto pthread uv luaplus53d iconv log4cxx protobuf hiredis iconv mysqlclient PocoCryptod PocoNetd PocoNetSSLd PocoJSONd PocoUtild PocoFoundationd PocoJSONd PocoXMLd PocoDatad PocoDataMySQLd KFLoggerd KFThreadd KFXmld KFPlugind KFTimed KFMemoryd KFConvertd KFProtocold KFRandd KFHttpd KFCored KFConHashd KFCompressd KFCryptod KFNetworkd KFUtilityd KFMath3Dd)
else()
    target_link_libraries(${project_name} z dl jsoncpp ssl crypto pthread uv luaplus53 iconv log4cxx protobuf hiredis iconv mysqlclient PocoCrypto PocoNet PocoNetSSL PocoJSON PocoUtil PocoFoundation PocoJSON PocoXML PocoData PocoDataMySQL KFLogger KFThread KFXml KFPlugin KFTime KFMemory KFConvert KFProtocol KFRand KFHttp KFCore KFConHash KFCompress KFCrypto KFNetwork KFUtility KFMath3D)  
endif()

endmacro(LINK_SDK_MACRO project_name)

macro(BUILD_PLUGIN_MACRO project_name)
aux_source_directory(. KF_SRC)

add_library(${project_name} SHARED ${KF_SRC})
add_dependencies(${project_name} KFThread)
add_dependencies(${project_name} KFCompress)
add_dependencies(${project_name} KFConHash)
add_dependencies(${project_name} KFConvert)
add_dependencies(${project_name} KFCrypto)
add_dependencies(${project_name} KFCore)
add_dependencies(${project_name} KFExcel)
add_dependencies(${project_name} KFHttp)
add_dependencies(${project_name} KFLogger)
add_dependencies(${project_name} KFMath3D)
add_dependencies(${project_name} KFMemory)
add_dependencies(${project_name} KFNetwork)
add_dependencies(${project_name} KFPlugin)
add_dependencies(${project_name} KFProtocol)
add_dependencies(${project_name} KFRand)
add_dependencies(${project_name} KFTime)
add_dependencies(${project_name} KFUtility)
add_dependencies(${project_name} KFXml)

set_target_properties(${project_name} PROPERTIES PREFIX "")
set_target_properties(${project_name} PROPERTIES OUTPUT_NAME_DEBUG "${project_name}d")
set_target_properties(${project_name} PROPERTIES
    FOLDER "KFPlugin"
    ARCHIVE_OUTPUT_DIRECTORY ${BIN_DIR}
    RUNTIME_OUTPUT_DIRECTORY ${BIN_DIR}
    LIBRARY_OUTPUT_DIRECTORY ${BIN_DIR})

LINK_SDK_MACRO(${project_name})
endmacro(BUILD_PLUGIN_MACRO project_name)



add_subdirectory(KFAchieve)
add_subdirectory(KFActivity)
add_subdirectory(KFAuth)
add_subdirectory(KFBattleClient)
add_subdirectory(KFBattleProxy)
add_subdirectory(KFBattleShard)
add_subdirectory(KFBus)
add_subdirectory(KFChannel)
add_subdirectory(KFChat)
add_subdirectory(KFClothes)
add_subdirectory(KFClusterClient)
add_subdirectory(KFClusterProxy)
add_subdirectory(KFClusterServer)
add_subdirectory(KFClusterShard)
add_subdirectory(KFConfig)
add_subdirectory(KFCompound)
add_subdirectory(KFDataClient)
add_subdirectory(KFDataProxy)
add_subdirectory(KFDataShard)
add_subdirectory(KFDebug)
add_subdirectory(KFDeployAgent)
add_subdirectory(KFDeployServer)
add_subdirectory(KFDeployClient)
add_subdirectory(KFDeployCommand)
add_subdirectory(KFDisplay)
add_subdirectory(KFEnter)
#add_subdirectory(KFFtp)
add_subdirectory(KFGame)
add_subdirectory(KFGate)
add_subdirectory(KFGift)
add_subdirectory(KFGroupClient)
add_subdirectory(KFGroupProxy)
add_subdirectory(KFGroupShard)
add_subdirectory(KFGuildClient)
add_subdirectory(KFGuildProxy)
add_subdirectory(KFGuildShard)
add_subdirectory(KFHttpClient)
add_subdirectory(KFHttpServer)
add_subdirectory(KFIpAddress)
add_subdirectory(KFItem)
add_subdirectory(KFKernel)
#add_subdirectory(KFLeave)
add_subdirectory(KFLogin)
add_subdirectory(KFLoginGame)
add_subdirectory(KFLoginGate)
add_subdirectory(KFLoginLogin)
add_subdirectory(KFLoginProxy)
add_subdirectory(KFLoginWorld)
add_subdirectory(KFLua)
add_subdirectory(KFMailClient)
add_subdirectory(KFMailProxy)
add_subdirectory(KFMailShard)
add_subdirectory(KFMatchClient)
add_subdirectory(KFMatchProxy)
add_subdirectory(KFMatchShard)
add_subdirectory(KFMessage)
add_subdirectory(KFMySQL)
add_subdirectory(KFOption)
add_subdirectory(KFPlatform)
add_subdirectory(KFPlayer)
add_subdirectory(KFProxy)
add_subdirectory(KFPublicClient)
add_subdirectory(KFPublicProxy)
add_subdirectory(KFPublicShard)
add_subdirectory(KFRankClient)
add_subdirectory(KFRankProxy)
add_subdirectory(KFRankShard)
add_subdirectory(KFReset)
add_subdirectory(KFRedis)
add_subdirectory(KFRouteClient)
add_subdirectory(KFRouteProxy)
add_subdirectory(KFRouteShard)
add_subdirectory(KFRelationClient)
add_subdirectory(KFRelationProxy)
add_subdirectory(KFRelationShard)
add_subdirectory(KFSchedule)
add_subdirectory(KFStore)
add_subdirectory(KFTask)
add_subdirectory(KFTcpClient)
add_subdirectory(KFTcpServer)
add_subdirectory(KFTimer)
add_subdirectory(KFWorker)
add_subdirectory(KFWorld)
add_subdirectory(KFZone)
add_subdirectory(KFLogClient)
add_subdirectory(KFLogProxy)
add_subdirectory(KFLogShard)